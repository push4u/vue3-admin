import{u as M}from"./usePagination-rdI7J7GV.js";import{f as E}from"./index-Y-UeT1O7.js";import{g as H}from"./dict-g-OcDaA7.js";import{a as $}from"./index-iflWsFET.js";import{C as j}from"./element-V6-G1TdP.js";import{l as W,r as f,Z,b as A,e as G,ag as l,aq as K,m as s,p as _,V as x,M as c,O as t,F as Q,u as d,a7 as X,T as e,S as v,R as Y,q as O}from"./vue-ZDMaqQfr.js";import{_ as ee}from"./index-GmBho-p0.js";import"./index-K7uq35-Y.js";import"./index-3ZmjaZh9.js";import"./vxe-SD4sv8pp.js";const ae={class:"app-container"},te={class:"table-wrapper"},oe={key:1},le={key:1},ne={class:"pager-wrapper"},re=W({name:"logRecordOperation",__name:"operation",setup(ie){const u=f(!1),{paginationData:o,handleCurrentChange:B,handleSizeChange:F}=M(),g=f([]),b=f(null),n=Z({page:void 0,pageSize:void 0,method:void 0,remark:void 0,ip:void 0}),w=()=>{u.value=!0,$({page:o.currentPage,page_size:o.pageSize,method:n.method||void 0,remark:n.remark||void 0,ip:n.ip||void 0}).then(r=>{o.total=r.data.total,g.value=r.data.list}).catch(()=>{g.value=[]}).finally(()=>{u.value=!1})},k=()=>{o.currentPage===1?w():o.currentPage=1},N=()=>{var r;(r=b.value)==null||r.resetFields(),k()},C=r=>{const p=JSON.parse(r),h=JSON.stringify(p,null,2);j.alert("<pre>"+h+"</pre>","详情",{dangerouslyUseHTMLString:!0,customStyle:{maxWidth:"40%",overflow:"auto"}})},R=H("method");A([()=>o.currentPage,()=>o.pageSize],w,{immediate:!0});const T=G(()=>r=>E(r));return(r,p)=>{const h=l("el-option"),q=l("el-select"),m=l("el-form-item"),y=l("el-input"),S=l("el-button"),I=l("el-form"),V=l("el-card"),i=l("el-table-column"),z=l("View"),D=l("el-icon"),L=l("el-table"),U=l("el-pagination"),P=K("loading");return s(),_("div",ae,[x((s(),c(V,{shadow:"never",class:"search-wrapper"},{default:t(()=>[e(I,{ref_key:"searchFormRef",ref:b,inline:!0,model:n},{default:t(()=>[e(m,{prop:"method",label:"请求方法"},{default:t(()=>[e(q,{modelValue:n.method,"onUpdate:modelValue":p[0]||(p[0]=a=>n.method=a)},{default:t(()=>[(s(!0),_(Q,null,X(d(R),a=>(s(),c(h,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,{prop:"remark",label:"操作内容"},{default:t(()=>[e(y,{modelValue:n.remark,"onUpdate:modelValue":p[1]||(p[1]=a=>n.remark=a),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),e(m,{prop:"ip",label:"IP地址"},{default:t(()=>[e(y,{modelValue:n.ip,"onUpdate:modelValue":p[2]||(p[2]=a=>n.ip=a),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),e(m,null,{default:t(()=>[e(S,{type:"primary",onClick:k},{default:t(()=>[v("查询")]),_:1}),e(S,{onClick:N},{default:t(()=>[v("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})),[[P,u.value]]),x((s(),c(V,{shadow:"never"},{default:t(()=>[O("div",te,[e(L,{data:g.value},{default:t(()=>[e(i,{prop:"id",label:"ID","min-width":"110"}),e(i,{prop:"username",label:"操作人","min-width":"110"}),e(i,{prop:"created_at",label:"日期","min-width":"160"},{default:t(a=>[v(Y(T.value(a.row.updated_at)),1)]),_:1}),e(i,{prop:"ip",label:"请求IP","min-width":"110"}),e(i,{prop:"status",label:"状态","min-width":"110"}),e(i,{prop:"method",label:"请求方法","min-width":"160"}),e(i,{prop:"remark",label:"操作内容","min-width":"110"}),e(i,{label:"请求",prop:"path",width:"80"},{default:t(a=>[a.row.req?(s(),c(D,{key:0},{default:t(()=>[e(z,{onClick:J=>C(a.row.req)},null,8,["onClick"])]),_:2},1024)):(s(),_("span",oe,"无"))]),_:1}),e(i,{label:"响应",prop:"path",width:"80"},{default:t(a=>[a.row.resp?(s(),c(D,{key:0},{default:t(()=>[e(z,{onClick:J=>C(a.row.resp)},null,8,["onClick"])]),_:2},1024)):(s(),_("span",le,"无"))]),_:1})]),_:1},8,["data"])]),O("div",ne,[e(U,{background:"",layout:d(o).layout,"page-sizes":d(o).pageSizes,total:d(o).total,"page-size":d(o).pageSize,currentPage:d(o).currentPage,onSizeChange:d(F),onCurrentChange:d(B)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])]),_:1})),[[P,u.value]])])}}}),ve=ee(re,[["__scopeId","data-v-9930e36d"]]);export{ve as default};
