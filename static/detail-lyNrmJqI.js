import{B as A,E as y,C as J}from"./element-V6-G1TdP.js";import{u as K}from"./usePagination-rdI7J7GV.js";import{f as Q}from"./index-MVvC626z.js";import{C as W,U as X,D as Y,G as ee,L as ae}from"./index-rtH7bDgk.js";import{l as te,r as m,Z as z,b as le,e as oe,ag as s,aq as ne,m as x,p as se,V as re,M as ue,O as a,u as i,S as u,T as e,q as g,R as S}from"./vue-ZDMaqQfr.js";import{_ as ie}from"./index-Ebit6zJ7.js";import"./vxe-SD4sv8pp.js";const de={class:"app-container"},pe={class:"toolbar-wrapper"},ce={class:"table-wrapper"},me={class:"pager-wrapper"},_e=te({name:"dictDetail",__name:"detail",props:{dictId:{type:Number,required:!0}},setup(U){const V=U,b=m(!1),{paginationData:r,handleCurrentChange:B,handleSizeChange:q}=K(),d=m(!1),C=m(null),n=m({}),I=z({label:[{required:!0,trigger:"blur",message:"请输入展示值"}],value:[{required:!0,trigger:"blur",message:"请输入字典值"}],sort:[{required:!0,trigger:"blur",message:"请输入排序标记"}],status:[{required:!0,trigger:"change",message:"请选择状态"}]}),P=()=>{var o;(o=C.value)==null||o.validate((t,p)=>{t?_.value===void 0?W({dict_id:V.dictId,...n.value}).then(()=>{y.success("新增成功"),v()}).finally(()=>{d.value=!1}):X(_.value,{...n.value}).then(()=>{y.success("修改成功"),v()}).finally(()=>{d.value=!1}):console.error("表单校验不通过",p)})},T=()=>{var o;_.value=void 0,(o=C.value)==null||o.resetFields(),n.value={}},E=o=>{J.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Y({id:[o.id]}).then(()=>{y.success("删除成功"),v()})})},_=m(void 0),N=o=>{ee(o.id).then(t=>{_.value=o.id,Object.assign(n.value,t.data||{}),d.value=!0})},h=m([]),w=z({keyword:"",status:void 0}),v=()=>{b.value=!0,ae({page:r.currentPage,page_size:r.pageSize,dict_id:V.dictId,keyword:w.keyword||void 0,status:w.status||void 0}).then(o=>{r.total=o.data.total,h.value=o.data.list}).catch(()=>{h.value=[]}).finally(()=>{b.value=!1})};le([()=>r.currentPage,()=>r.pageSize],v,{immediate:!0});const R=oe(()=>o=>Q(o));return(o,t)=>{const p=s("el-button"),c=s("el-table-column"),$=s("el-table"),M=s("el-pagination"),F=s("el-card"),k=s("el-input"),f=s("el-form-item"),D=s("el-radio"),G=s("el-radio-group"),L=s("el-input-number"),O=s("el-form"),j=s("el-dialog"),H=ne("loading");return x(),se("div",de,[re((x(),ue(F,{shadow:"never"},{default:a(()=>[g("div",pe,[g("div",null,[e(p,{type:"primary",icon:i(A),onClick:t[0]||(t[0]=l=>d.value=!0)},{default:a(()=>[u("新增字典项")]),_:1},8,["icon"])])]),g("div",ce,[e($,{data:h.value},{default:a(()=>[e(c,{label:"ID",prop:"id"}),e(c,{label:"展示名称",prop:"label"}),e(c,{label:"字典值",prop:"value"}),e(c,{label:"启用状态",prop:"status","min-width":"110"},{default:a(l=>[u(S(l.row.status?"正常":"禁用"),1)]),_:1}),e(c,{label:"排序标记",prop:"sort"}),e(c,{prop:"updated_at",label:"更新于","min-width":"110"},{default:a(l=>[u(S(R.value(l.row.updated_at)),1)]),_:1}),e(c,{label:"操作",width:"150",align:"center"},{default:a(l=>[e(p,{type:"primary",text:"",bg:"",size:"small",onClick:Z=>N(l.row)},{default:a(()=>[u("修改")]),_:2},1032,["onClick"]),e(p,{type:"danger",text:"",bg:"",size:"small",onClick:Z=>E(l.row)},{default:a(()=>[u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),g("div",me,[e(M,{background:"",layout:i(r).layout,"page-sizes":i(r).pageSizes,total:i(r).total,"page-size":i(r).pageSize,currentPage:i(r).currentPage,onSizeChange:i(q),onCurrentChange:i(B)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])]),_:1})),[[H,b.value]]),e(j,{modelValue:d.value,"onUpdate:modelValue":t[6]||(t[6]=l=>d.value=l),title:_.value===void 0?"新增":"修改",onClose:T,width:"30%"},{footer:a(()=>[e(p,{onClick:t[5]||(t[5]=l=>d.value=!1)},{default:a(()=>[u("取消")]),_:1}),e(p,{type:"primary",onClick:P},{default:a(()=>[u("确认")]),_:1})]),default:a(()=>[e(O,{ref_key:"formRef",ref:C,model:n.value,rules:I,"label-width":"100px","label-position":"right"},{default:a(()=>[e(f,{prop:"label",label:"展示值"},{default:a(()=>[e(k,{modelValue:n.value.label,"onUpdate:modelValue":t[1]||(t[1]=l=>n.value.label=l),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),e(f,{prop:"value",label:"字典值"},{default:a(()=>[e(k,{modelValue:n.value.value,"onUpdate:modelValue":t[2]||(t[2]=l=>n.value.value=l),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),e(f,{prop:"status",label:"状态"},{default:a(()=>[e(G,{modelValue:n.value.status,"onUpdate:modelValue":t[3]||(t[3]=l=>n.value.status=l)},{default:a(()=>[e(D,{label:!0},{default:a(()=>[u("正常")]),_:1}),e(D,{label:!1},{default:a(()=>[u("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(f,{prop:"sort",label:"排序"},{default:a(()=>[e(L,{modelValue:n.value.sort,"onUpdate:modelValue":t[4]||(t[4]=l=>n.value.sort=l),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}}),Ve=ie(_e,[["__scopeId","data-v-3c086108"]]);export{Ve as default};
