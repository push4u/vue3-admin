import{B as ee,E as z,C as ae}from"./element-V6-G1TdP.js";import{u as te}from"./usePagination-rdI7J7GV.js";import{f as le}from"./index-3CNtC7Ha.js";import oe from"./detail-kuuO5sUL.js";import{a as S,C as ne,U as re,D as se,G as ie,L as de}from"./index-17p7Gr5i.js";import{l as ue,r as f,Z as F,b as pe,e as ce,ag as r,aq as I,m as g,p as me,V as y,M as w,O as a,T as e,S as i,u as d,q as V,R as $}from"./vue-ZDMaqQfr.js";import{_ as _e}from"./index-48mj1yrg.js";import"./index-xx4fYt8h.js";import"./vxe-SD4sv8pp.js";const fe={class:"app-container"},ve={class:"toolbar-wrapper"},ge={class:"table-wrapper"},be={class:"pager-wrapper"},he=ue({name:"dict",__name:"index",setup(ye){const C=f(!1),{paginationData:s,handleCurrentChange:L,handleSizeChange:M}=te(),p=f(!1),k=f(null),n=f({}),N=F({name:[{required:!0,trigger:"blur",message:"请输入中文字典名"}],description:[{required:!0,trigger:"blur",message:"请输入描述"}],type:[{required:!0,trigger:"blur",message:"请输入中文字典名"}],status:[{required:!0,trigger:"change",message:"请选择字典状态"}]}),O=()=>{var o;(o=k.value)==null||o.validate((l,v)=>{l?b.value===void 0?ne(n.value).then(()=>{z.success("新增成功"),h()}).finally(()=>{p.value=!1}):re(b.value,{...n.value}).then(()=>{z.success("修改成功"),h()}).finally(()=>{p.value=!1}):console.error("表单校验不通过",v)})},G=()=>{var o;b.value=void 0,(o=k.value)==null||o.resetFields(),n.value={}},j=o=>{ae.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{se({id:[o.id]}).then(()=>{z.success("删除成功"),h()})})},b=f(void 0),H=o=>{ie(o.id).then(l=>{b.value=o.id,Object.assign(n.value,l.data||{}),p.value=!0})},x=f([]),U=f(null),c=F({keyword:"",status:void 0}),h=()=>{C.value=!0,de({page:s.currentPage,page_size:s.pageSize,keyword:c.keyword||void 0,status:c.status||void 0}).then(o=>{s.total=o.data.total,x.value=o.data.list}).catch(()=>{x.value=[]}).finally(()=>{C.value=!1})},P=()=>{s.currentPage===1?h():s.currentPage=1},Z=()=>{var o;(o=U.value)==null||o.resetFields(),P()};pe([()=>s.currentPage,()=>s.pageSize],h,{immediate:!0});const A=ce(()=>o=>le(o));return(o,l)=>{const v=r("el-input"),m=r("el-form-item"),T=r("el-option"),J=r("el-select"),_=r("el-button"),B=r("el-form"),E=r("el-card"),u=r("el-table-column"),K=r("el-table"),Q=r("el-pagination"),q=r("el-radio"),W=r("el-radio-group"),X=r("el-dialog"),R=I("loading"),D=I("permission");return g(),me("div",fe,[y((g(),w(E,{shadow:"never",class:"search-wrapper"},{default:a(()=>[e(B,{ref_key:"searchFormRef",ref:U,inline:!0,model:c},{default:a(()=>[e(m,{prop:"keyword",label:"关键字"},{default:a(()=>[e(v,{modelValue:c.keyword,"onUpdate:modelValue":l[0]||(l[0]=t=>c.keyword=t),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),e(m,{prop:"status",label:"状态"},{default:a(()=>[e(J,{clearable:"",placeholder:"请选择",modelValue:c.status,"onUpdate:modelValue":l[1]||(l[1]=t=>c.status=t)},{default:a(()=>[e(T,{key:"true",label:"正常",value:"true"}),e(T,{key:"false",label:"禁用",value:"false"})]),_:1},8,["modelValue"])]),_:1}),e(m,null,{default:a(()=>[e(_,{type:"primary",onClick:P},{default:a(()=>[i("查询")]),_:1}),e(_,{onClick:Z},{default:a(()=>[i("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})),[[R,C.value]]),y((g(),w(E,{shadow:"never"},{default:a(()=>[V("div",ve,[V("div",null,[y((g(),w(_,{type:"primary",icon:d(ee),onClick:l[2]||(l[2]=t=>p.value=!0)},{default:a(()=>[i("新增字典")]),_:1},8,["icon"])),[[D,d(S)+"_POST"]])])]),V("div",ge,[e(K,{data:x.value},{default:a(()=>[e(u,{type:"expand"},{default:a(t=>[e(oe,{dictId:t.row.id},null,8,["dictId"])]),_:1}),e(u,{prop:"id",label:"ID","min-width":"110"}),e(u,{prop:"name",label:"字典名(中)","min-width":"110"}),e(u,{prop:"type",label:"字典名(英)","min-width":"160",sortable:""}),e(u,{prop:"status",label:"状态","min-width":"110"},{default:a(t=>[i($(t.row.status?"正常":"禁用"),1)]),_:1}),e(u,{prop:"description",label:"描述","min-width":"110"}),e(u,{prop:"updated_at",label:"最后更新","min-width":"110"},{default:a(t=>[i($(A.value(t.row.updated_at)),1)]),_:1}),e(u,{label:"操作",width:"150",align:"center"},{default:a(t=>[y((g(),w(_,{type:"primary",text:"",bg:"",size:"small",onClick:Y=>H(t.row)},{default:a(()=>[i("修改")]),_:2},1032,["onClick"])),[[D,d(S)+"/:id_PUT"]]),y((g(),w(_,{type:"danger",text:"",bg:"",size:"small",onClick:Y=>j(t.row)},{default:a(()=>[i("删除")]),_:2},1032,["onClick"])),[[D,d(S)+"_DELETE"]])]),_:1})]),_:1},8,["data"])]),V("div",be,[e(Q,{background:"",layout:d(s).layout,"page-sizes":d(s).pageSizes,total:d(s).total,"page-size":d(s).pageSize,currentPage:d(s).currentPage,onSizeChange:d(M),onCurrentChange:d(L)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])]),_:1})),[[R,C.value]]),e(X,{modelValue:p.value,"onUpdate:modelValue":l[8]||(l[8]=t=>p.value=t),title:b.value===void 0?"新增":"修改",onClose:G,width:"30%"},{footer:a(()=>[e(_,{onClick:l[7]||(l[7]=t=>p.value=!1)},{default:a(()=>[i("取消")]),_:1}),e(_,{type:"primary",onClick:O},{default:a(()=>[i("确认")]),_:1})]),default:a(()=>[e(B,{ref_key:"formRef",ref:k,model:n.value,rules:N,"label-width":"100px","label-position":"right"},{default:a(()=>[e(m,{prop:"name",label:"字典名(中)"},{default:a(()=>[e(v,{modelValue:n.value.name,"onUpdate:modelValue":l[3]||(l[3]=t=>n.value.name=t),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),e(m,{prop:"type",label:"字典名(英)"},{default:a(()=>[e(v,{modelValue:n.value.type,"onUpdate:modelValue":l[4]||(l[4]=t=>n.value.type=t),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),e(m,{prop:"status",label:"状态"},{default:a(()=>[e(W,{modelValue:n.value.status,"onUpdate:modelValue":l[5]||(l[5]=t=>n.value.status=t)},{default:a(()=>[e(q,{label:!0},{default:a(()=>[i("正常")]),_:1}),e(q,{label:!1},{default:a(()=>[i("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(m,{prop:"description",label:"描述"},{default:a(()=>[e(v,{modelValue:n.value.description,"onUpdate:modelValue":l[6]||(l[6]=t=>n.value.description=t),placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}}),Pe=_e(he,[["__scopeId","data-v-4fb75c9d"]]);export{Pe as default};
